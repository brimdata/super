script: |
  mkdir logs
  zed lake import -R logs babble.zson
  zed lake ls -R logs -ranges
  echo ===
  zed lake ls -R logs -relative | sort > t1
  (cd logs; find zd -type d -regex ".*\.zar$" | sort) > t2
  test -s t1 && test -s t2 && diff t1 t2 && echo ls matches
  echo ===
  touch $(find logs/zd -type d -regex ".*\.zar$" | sort | head -n 1)/foo
  zed lake ls -relative -R logs -l foo > t3
  (cd logs; find zd -type f -name foo) > t4
  test -s t3 && test -s t4 && diff t3 t4 && echo found foo
  echo ===
  zed lake ls -R logs -ranges -l
  echo ===

inputs:
  - name: babble.zson
    source: ../../ztests/suite/data/babble.zson

outputs:
  - name: stdout
    data: |
      [1587518620062237300-1587513611063914690]
      [1587513592062544400-1587508830068523240]
      ===
      ls matches
      ===
      found foo
      ===
      [1587513592062544400-1587508830068523240]/foo
      ===
