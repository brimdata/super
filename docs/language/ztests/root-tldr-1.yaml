# ============================================================================
# NOTE: This is a test to protect an example shown in the Zed language
# docs. If you need to make changes to the Zed below to make the tests pass
# again after a change, the docs likely need to be updated as well.
#
# See https://github.com/brimdata/zed/pull/xxxx for details
# ============================================================================

# The "sort" is not part of the example shown in the docs, but is necessary
# because the output from the aggregation has no guaranteed sort order.

zed: |
  color=="brown" | put characters:=len(name) | count() by flavor,characters | sort

input: |
  {"color":"brown","name":"kiwi","flavor":"sweet"}
  {"color":"red","name":"apple","flavor":"tart"}
  {"color":"brown","name":"coconut","flavor":"nutty"}

output: |
  {flavor:"sweet",characters:4,count:1 (uint64)} (=0)
  {flavor:"nutty",characters:7,count:1} (0)
