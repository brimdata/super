script: |
  super compile -C -I test.zed
  echo ===
  super compile -dag -C -I test.zed

inputs:
  - name: test.zed
    data: |
      // Expressions
      yield (over a | ?b)
      | yield (over a with b=c | ?d)
      | yield (over a, b with c=d, e=f | ?g)
      // Operators
      | over a
      | over a into ( ?b )
      | over a with b=c into ( ?d )
      | over a, b with c=d, e=f into ( ?g )

outputs:
  - name: stdout
    data: |
      yield (
        over a
        | search b
      )
      | yield (
        over a with b=c
        | search d
      )
      | yield (
        over a, b with c=d, e=f
        | search g
      )
      | over a
      | over a into (
        search b
      )
      | over a with b=c into (
        search d
      )
      | over a, b with c=d, e=f into (
        search g
      )
      ===
      null
      | yield (
        over a
        | where search("b")
      )
      | yield (
        over ab=c
        | where search("d")
      )
      | yield (
        over a, bc=d, e=f
        | where search("g")
      )
      | over a
      | over a into (
        where search("b")
      )
      | over a with b=c into (
        where search("d")
      )
      | over a, b with c=d, e=f into (
        where search("g")
      )
      | output main
