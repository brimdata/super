script: |
  export ZED_LAKE=test
  zed init -q
  zed create -q -orderby ts test
  zc -C -P 2 "from test | count() by y" | sed -e 's/lister pool.*/lister .../' -e 's/seqscan pool .*/seqscan .../'
  echo ===
  zc -C -P 2 "from test | count()" | sed -e 's/lister pool.*/lister .../' -e 's/seqscan pool .*/seqscan .../'

outputs:
  - name: stdout
    data: |
      lister ...
      | fork (
        =>
          seqscan ...
          | summarize partials-out
              count:=count() by y:=y
        =>
          seqscan ...
          | summarize partials-out
              count:=count() by y:=y
      )
      | combine
      | summarize partials-in
          count:=count() by y:=y
      ===
      lister ...
      | fork (
        =>
          seqscan ...
          | summarize partials-out
              count:=count()
        =>
          seqscan ...
          | summarize partials-out
              count:=count()
      )
      | combine
      | summarize partials-in
          count:=count()
      | yield count
