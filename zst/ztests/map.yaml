script: |
  zq -f zst -o out.zst -
  zq -z -i zst out.zst

inputs:
  - name: stdin
    data: &input |
      {m:|{"foo":"bar","hello":"goodbye"}|}
      {m:|{"foo":"bar2","hello2":"goodbye"}|}
      {m2:|{1:"goodbye",2:null(string)}|}
      {m:null(|{string:string}|)}
      {m2:null(|{int64:string}|)}
      {m2:|{3:"goodbye",4:null(string)}|}

outputs:
  - name: stdout
    data: *input
