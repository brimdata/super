spq: |
  values cast(this, <{a:|[ip]|,b:|[{b:ip}]|}>)

vector: true

input: |
  {a:[]::[string],b:[]::[{b:string}]}
  {a:["1.1.1.1","2.2.2.2","2.2.2.2"],b:[{b:"1.1.1.1"},{b:"2.2.2.2"},{b:"2.2.2.2"}]}
  {a:["1.1.1.1"],b:[{b:null},{b:"2.2.2.2"}]}
  {a:["1.1.1.1","2"],b:[{b:null},{b:"1.1.1.1"},{b:"2"}]}

output: |
  {a:|[]|::|[ip]|,b:|[]|::|[{b:ip}]|}
  {a:|[1.1.1.1,2.2.2.2]|,b:|[{b:1.1.1.1},{b:2.2.2.2}]|}
  {a:|[1.1.1.1]|,b:|[{b:2.2.2.2},{b:null::(ip|null)}]|}
  {a:|[1.1.1.1,error({message:"cannot cast to ip",on:"2"})]|,b:|[{b:1.1.1.1},{b:null::(ip|null)},{b:error({message:"cannot cast to ip",on:"2"})}]|}
