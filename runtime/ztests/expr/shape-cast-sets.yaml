spq: |
  values cast(this, <{a:|[ip]|,b:|[{b:ip}]|}>)

vector: true

input: |
  {a:|[]|::|[string]|,b:|[]|::|[{b:string}]|}
  {a:|["1.1.1.1","2.2.2.2"]|,b:|[{b:"1.1.1.1"},{b:"2.2.2.2"}]|}
  {a:null,b:null}
  {a:|[null,"1.1.1.1"]|,b:|[null,{b:null},{b:"2.2.2.2"}]|}
  {a:|[null,"1.1.1.1","2"]|,b:|[null,{b:null},{b:"1.1.1.1"},{b:"2"}]|}

output: |
  {a:|[]|::|[ip]|,b:|[]|::|[{b:ip}]|}
  {a:|[1.1.1.1,2.2.2.2]|,b:|[{b:1.1.1.1},{b:2.2.2.2}]|}
  {a:error({message:"cannot cast to |[ip]|",on:null}),b:error({message:"cannot cast to |[{b:ip}]|",on:null})}
  {a:|[1.1.1.1,error({message:"cannot cast to ip",on:null})]|,b:|[{b:2.2.2.2},{b:error({message:"cannot cast to ip",on:null})},error({message:"cannot cast to {b:ip}",on:null})]|}
  {a:|[1.1.1.1,error({message:"cannot cast to ip",on:null}),error({message:"cannot cast to ip",on:"2"})]|,b:|[{b:1.1.1.1},{b:error({message:"cannot cast to ip",on:null})},{b:error({message:"cannot cast to ip",on:"2"})},error({message:"cannot cast to {b:ip}",on:null})]|}
