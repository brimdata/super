script: |
  super -s -I q1.spq 2>&1 | super -s -c "sort this" -
  echo ===
  super -s -I q2.spq 2>&1 | super -s -c "sort this" -

vector: true

inputs:
  # from issue #6681
  - name: q1.spq
    data: |
      values [1,2] |
      unnest this into (
        values this
        | debug f'look at {this}'
      )
  # from issue #5230
  - name: q2.spq
    data: |
      values 1,3
      | fork
        (count() | debug f"debug: count {this}" | values f"post debug count {this}")
        (sum(this) | debug f"sum is {this}" | values f"post debug sum {this}")
      | values f"{this}"

outputs:
  - name: stdout
    data: |
      1
      2
      "look at 1"
      "look at 2"
      ===
      "debug: count 2"
      "post debug count 2"
      "post debug sum 4"
      "sum is 4"
