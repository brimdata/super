zql: "sum(x) where s='a', s2=sum(x) by key=animal | sort ."

input: |
  #0:record[animal:string,s:string,x:int32]
  0:[cat;a;1;]
  0:[dog;b;1;]
  0:[cat;a;1;]
  0:[elephant;a;1;]
  0:[cat;b;1;]

output: |
  #0:record[key:string,sum:int64,s2:int64]
  0:[cat;2;3;]
  0:[elephant;1;1;]
  #1:record[key:string,sum:null,s2:int64]
  1:[dog;-;1;]
