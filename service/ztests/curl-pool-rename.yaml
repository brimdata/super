script: |
  source service.sh
  curl -X POST \
    -H "Accept: application/json" \
    -d '{"name": "test", "layout": { "order": "desc", "keys": [["ts"]] }}' \
    $ZED_LAKE/pool > /dev/null
  curl -X PUT \
    -H "Accept: application/json" \
    -d '{"name":"new_test"}' \
    $ZED_LAKE/pool/test
  curl -X POST \
    -H "Accept: application/json" \
    -d '{"query":"from :pools"}' \
    $ZED_LAKE/query

inputs:
  - name: service.sh

outputs:
  - name: stdout
    regexp: |
      \[\{"kind":"pools.Config","value":\{"id":"\w{42}","layout":\{"keys":\[\["ts"\]\],"order":"desc"\},"name":"new_test","threshold":524288000,"ts":"[0-9TZ:.\-]+"\}\}\]
