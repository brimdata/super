# Test that type names are properly reset and reusable after stream boundaries.

script: |
  super -c "head 1" in.jsup > t1.bsup
  super -c "tail 2" in.jsup > t2.bsup
  cat t1.bsup t2.bsup | super -z -c "count() by proto:=quiet(proto)" -

inputs:
  - name: in.jsup
    data: |
      {ts:2015-03-05T14:25:12.963801Z}
      {ts:2015-03-05T14:25:14.419939Z,proto:"udp"(=zenum)}
      {ts:2015-03-05T14:25:14.419939Z,proto:"udp"(=zenum)}

outputs:
  - name: stdout
    data: |
      {proto:"udp"(=zenum),count:2(uint64)}
