# Test that type aliases are properly reset and reusable after stream boundaries

script: |
  zq -b 2 - | zq -z "count() by proto" -

inputs:
  - name: stdin
    data: |
      {ts:2015-03-05T14:25:12.963801Z}
      {ts:2015-03-05T14:25:14.419939Z,proto:"udp" (=zenum)} (=0)
      {ts:2015-03-05T14:25:14.419939Z,proto:"udp"} (0)

outputs:
  - name: stdout
    data: |
      {proto:"udp" (=zenum),count:2 (uint64)} (=0)
