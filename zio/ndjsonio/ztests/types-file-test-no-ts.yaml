script: zq -z -j types.json in.ndjson

inputs:
  - name: in.ndjson
    data: |
      {"name": "foo","_path":"nots"}
  - name: types.json
    data: |
      {
        "descriptors": {
          "nots_log": [
            {
              "name": "_path",
              "type": "string"
            },
            {
              "name": "name",
              "type": "bstring"
            }
            ]
           },
        "rules": [
          {
            "name": "_path",
            "value": "nots",
            "descriptor": "nots_log"
          }
        ]
      }

outputs:
  - name: stdout
    data: |
      {_path:"nots",name:"foo" (bstring)} (=0)
