script: |
  export ZED_LAKE_ROOT=test
  zed lake init -q
  zed lake create -q -p POOL
  zed lake add -q -p POOL in.zson
  hex=$(zed lake status -p POOL -f zng | zq -f text "typeof(.)==type(StagedCommit) | cut s:='0x'+to_hex(commit)" -)
  zed lake commit -p POOL $hex

inputs:
  - name: in.zson
    data: |
      {x:1}

outputs:
  - name: stdout
    regexp: |
       \w{27} committed
